Ext.AceRoute.store.custStore=null;Ext.AceRoute.store.orderStore=null;Ext.AceRoute.store.orderTypeStore=null;Ext.AceRoute.store.partTypeStore=null;Ext.AceRoute.store.resourceStore=null;Ext.AceRoute.store.taskTypeStore=null;Ext.AceRoute.numberOfDaysToRetrieveDataFor=5;Ext.AceRoute.controller.AppController=Ext.AceRoute.controller.Controller.extend({view:null,_selfRef:null,store:null,isMapRenderedOnAddressClick:null,init:function(){this._super();this.appInitialize();var appView=new Ext.AceRoute.view.AppView(this);this.view=appView;this.setSelfRef(this);this.getSelfRef().setView(appView);},destroyLoginPanelCmp:function(loginViewPanelId){},btnClicked:function(event){view=_selfRef.getView();view.populateData();view.reRenderLayout();},setStore:function(st){this.store=st;},getStore:function(){return this.store;},setView:function(currentView){this._selfRef.view=currentView;},getView:function(){return this._selfRef.view;},setSelfRef:function(sRef){this._selfRef=sRef;},getSelfRef:function(){return this._selfRef;},appInitialize:function(){var todayDate=new Date();var numberOfDaysToRetrieveDataFor=Ext.AceRoute.numberOfDaysToRetrieveDataFor;var fromDate=new Date((new Date()).getTime()-3*(86400000));var toDate=new Date((new Date()).getTime()+3*(86400000));var fromDateStr=fromDate.getFullYear()+"-"+(fromDate.getMonth())+"-"+fromDate.getDate();var toDateStr=toDate.getFullYear()+"-"+(toDate.getMonth()+1)+"-"+toDate.getDate();Ext.AceRoute.store.custStore=new Ext.data.Store({autoLoad:true,model:"Customer",proxy:{type:"ajax",url:Ext.AceRoute.appUrl,extraParams:{mtoken:Ext.AceRoute.loginref,action:"getcust"},reader:{type:"xml",record:"cust"}}});Ext.AceRoute.store.HourOptions=[["0",0],["1",1],["2",2],["3",3],["4",4],["5",5],["6",6],["7",7],["8",8],["9",9],["10",10],["11",11],["12",12],["13",13],["14",14],["15",15],["16",16],["17",17],["18",18],["19",19],["20",20],["21",21],["22",22],["23",23],];Ext.AceRoute.store.hourStore=new Ext.data.ArrayStore({idIndex:0,fields:["hour_id","hour"],data:Ext.AceRoute.store.HourOptions});Ext.AceRoute.store.MinuteOptions=[["0",0],["1",1],["2",2],["3",3],["4",4],["5",5],["6",6],["7",7],["8",8],["9",9],["10",10],["11",11],["12",12],["13",13],["14",14],["15",15],["16",16],["17",17],["18",18],["19",19],["20",20],["21",21],["22",22],["23",23],["24",24],["25",25],["26",26],["27",27],["28",28],["29",29],["30",30],["31",31],["32",32],["33",33],["34",34],["35",35],["36",36],["37",37],["38",38],["39",39],["40",40],["41",41],["42",42],["43",43],["44",44],["45",45],["46",46],["47",47],["48",48],["49",49],["50",50],["51",51],["52",52],["53",53],["54",54],["55",55],["56",56],["57",57],["58",58],["59",59],["60",60]];Ext.AceRoute.store.minuteStore=new Ext.data.ArrayStore({idIndex:0,fields:["minute_id","minute"],data:Ext.AceRoute.store.MinuteOptions});Ext.AceRoute.store.orderAddUpdateOptions=[["part","Parts"],["task","Tasks"],["team","Team"],["image","Images"],["signature","Signature"],["note","Notes"]];Ext.AceRoute.store.orderAddUpdateOptionsStore=new Ext.data.ArrayStore({idIndex:0,fields:["orderAddUpdateOptionId","orderAddUpdateOptionName"],data:Ext.AceRoute.store.orderAddUpdateOptions});Ext.AceRoute.store.orderStore=new Ext.data.Store({autoLoad:true,model:"Order",id:"orderStore",name:"orderStore",sorters:[{property:"jobsGroupName",direction:"ASC"},{property:"start_date",direction:"ASC"}],getGroupString:function(r){return r.get("jobsGroupName");},proxy:{type:"ajax",url:Ext.AceRoute.appUrl,reader:{type:"xml",record:"event"}}});Ext.AceRoute.store.orderTypeStore=new Ext.data.Store({autoLoad:true,model:"OrderType",proxy:{type:"ajax",url:Ext.AceRoute.appUrl,extraParams:{mtoken:Ext.AceRoute.loginref,action:"getordertype"},reader:{type:"xml",record:"ordertype"}}});Ext.AceRoute.store.partTypeStore=new Ext.data.Store({autoLoad:true,model:"PartType",proxy:{type:"ajax",url:Ext.AceRoute.appUrl,extraParams:{mtoken:Ext.AceRoute.loginref,action:"getparttype"},reader:{type:"xml",record:"parttype"}}});Ext.AceRoute.store.PriorityOptions=[["1","Normal"],["2","Low"],["3","Medium"],["4","High"],["5","Urgent"],["6","Emergency"],["7","Critical"]];Ext.AceRoute.store.priorityStore=new Ext.data.ArrayStore({idIndex:0,fields:["priority_id","priorityType"],data:Ext.AceRoute.store.PriorityOptions});Ext.AceRoute.store.resourceStore=new Ext.data.Store({autoLoad:true,model:"Resource",proxy:{type:"ajax",url:Ext.AceRoute.appUrl,extraParams:{mtoken:Ext.AceRoute.loginref,action:"getres"},reader:{type:"xml",record:"res"}}});Ext.AceRoute.store.StatusOptions=[["0","New"],["1","Scheduled"],["2","Dispatched"],["6","In-Transit"],["3","Started"],["4","Completed"],["7","Invoiced"],["5","Cancelled"],["9","Unscheduled (Schedule Date Later)"]];Ext.AceRoute.store.statusStore=new Ext.data.ArrayStore({idIndex:0,fields:["wkf_id","statustype"],data:Ext.AceRoute.store.StatusOptions});Ext.AceRoute.store.systemOperationOptions=[["refreshOrders","Orders"]];Ext.AceRoute.store.systemOperationOptionsStore=new Ext.data.ArrayStore({idIndex:0,fields:["systemOperationOptionId","systemOperationOptionName"],data:Ext.AceRoute.store.systemOperationOptions});Ext.AceRoute.store.taskTypeStore=new Ext.data.Store({autoLoad:true,model:"TaskType",proxy:{type:"ajax",url:Ext.AceRoute.appUrl,extraParams:{mtoken:Ext.AceRoute.loginref,action:"gettasktype"},reader:{type:"xml",record:"tasktype"}}});Ext.AceRoute.store.AccordionStore=new Ext.data.Store({model:"Contact",sorters:"firstName",getGroupString:function(record){return record.get("firstName")[0];},data:[]});},queryOrdersForDate:function(startDate,endDate){},retriveOrder:function(dateToShow,orderStore){var store;var arguments={store:orderStore};this.submit(Ext.AceRoute.appUrl,this.reloadEntitiesSuccess,null,null,arguments);},callMethod:function(msg){return"Hello "+msg;},submit:function(url,success,failure,messages,arguments){Ext.Ajax.request({url:url,method:"POST",params:{mtoken:Ext.AceRoute.loginref,action:"getorders",tz:"US/Pacific",from:"2011-04-01",to:"2011-05-01"},success:success,failure:failure,argument:arguments});},reloadEntitiesSuccess:function(re){try{var args=arguments;var store=new Ext.data.Store({autoLoad:true,model:"Order",data:re.responseXML,proxy:{type:"memory",reader:{type:"xml",record:"event"}}});var store1=arguments[1].argument.store;store1.clearFilter();store1.filter("start_dateWithoutTime","2011/09/25");}catch(e){alert(" exception "+e);}},refreshMapTab:function(orderData,mapObjArray){var appTabPanel=Ext.getCmp("appTabPanel");var orderMapPanel=appTabPanel.getComponent("orderMapId");var mapComp=orderMapPanel.getComponent("mapId");if(typeof mapComp!=="undefined"){appTabPanel.removeMapTab(orderMapPanel,mapComp);appTabPanel.insertMapTab(appTabPanel,orderMapPanel,orderData,mapObjArray);}else{appTabPanel.insertMapTab(appTabPanel,orderMapPanel,orderData,mapObjArray);}}});