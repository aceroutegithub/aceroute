Ext.ns("Ext.AceRoute.service");Ext.AceRoute.service.InitConfigService=Class.extend({init:function(){this.initialzed=true;this.serviceCompleted=false;},startService:function(){var ajaxUtil=new Ext.AceRoute.util.AjaxUtil();var textData=ajaxUtil.invokeUrlAndGetAsText(Ext.AceRoute.appUrl+"?action=getclient"+"&mtoken="+Ext.AceRoute.loginref);doc=new DOMParser().parseFromString(textData,"text/xml");console.log(" textData "+textData);var configDataFromServer=doc.childNodes[0].childNodes[0].childNodes[3].firstChild.data;console.log(" configDataFromServer "+configDataFromServer);if(typeof configDataFromServer!=="undefined"){console.log("initConfig Step 1, geolocation service config found from server.");Ext.AceRoute.initConfig.geoLocation.client_mobi=configDataFromServer;localStorage.setItem("client_mobi",Ext.AceRoute.initConfig.geoLocation.client_mobi);}else{if(typeof localStorage.getItem("client_mobi")!=="object"){console.log("initConfig Step 2, geolocation service config found in local storage.");Ext.AceRoute.initConfig.geoLocation.client_mobi=localStorage.getItem("client_mobi");}else{console.log("initConfig Step 3, geolocation service config will use default config.");Ext.AceRoute.initConfig.geoLocation.client_mobi=Ext.AceRoute.initConfig.geoLocation.client_mobi_default;}}var configTokens=Ext.AceRoute.initConfig.geoLocation.client_mobi.split("|");Ext.AceRoute.initConfig.geoLocation.isEnabled=configTokens[0];Ext.AceRoute.initConfig.geoLocation.intervalToRecordGeoLoc=configTokens[1];Ext.AceRoute.initConfig.geoLocation.intervalToSendGeoLoc=configTokens[2];Ext.AceRoute.initConfig.geoLocation.intervalToFetchNewOrders=configTokens[3];if(typeof Ext.AceRoute.initConfig.geoLocation.intervalToRecordGeoLoc==="undefined"){Ext.AceRoute.initConfig.geoLocation.intervalToRecordGeoLoc=5;}if(typeof Ext.AceRoute.initConfig.geoLocation.intervalToSendGeoLoc==="undefined"){Ext.AceRoute.initConfig.geoLocation.intervalToSendGeoLoc=15;}console.log("Ext.AceRoute.initConfig.geoLocation.isEnabled:"+Ext.AceRoute.initConfig.geoLocation.isEnabled);console.log("Ext.AceRoute.initConfig.geoLocation.intervalToRecordGeoLoc:"+Ext.AceRoute.initConfig.geoLocation.intervalToRecordGeoLoc);console.log("Ext.AceRoute.initConfig.geoLocation.intervalToSendGeoLoc:"+Ext.AceRoute.initConfig.geoLocation.intervalToSendGeoLoc);this.serviceCompleted=true;}});